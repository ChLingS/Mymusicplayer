import{_ as T,r as _,w as S,o as V,Q as F,G as h,H as m,L as p,h as x,R as O,S as y,U as B,F as k,O as C,c as J,M as j,V as W,W as G,P as H}from"./_plugin-vue_export-helper-e232eb61.js";var N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var D={exports:{}};(function(f,c){(function(w,g){f.exports=g()})(N,function(){function w(e){var d=[];return e.AMapUI&&d.push(g(e.AMapUI)),e.Loca&&d.push(b(e.Loca)),Promise.all(d)}function g(e){return new Promise(function(d,o){var n=[];if(e.plugins)for(var a=0;a<e.plugins.length;a+=1)t.AMapUI.plugins.indexOf(e.plugins[a])==-1&&n.push(e.plugins[a]);if(s.AMapUI===i.failed)o("前次请求 AMapUI 失败");else if(s.AMapUI===i.notload){s.AMapUI=i.loading,t.AMapUI.version=e.version||t.AMapUI.version,a=t.AMapUI.version;var u=document.body||document.head,r=document.createElement("script");r.type="text/javascript",r.src="https://webapi.amap.com/ui/"+a+"/main.js",r.onerror=function(l){s.AMapUI=i.failed,o("请求 AMapUI 失败")},r.onload=function(){if(s.AMapUI=i.loaded,n.length)window.AMapUI.loadUI(n,function(){for(var l=0,A=n.length;l<A;l++){var M=n[l].split("/").slice(-1)[0];window.AMapUI[M]=arguments[l]}for(d();v.AMapUI.length;)v.AMapUI.splice(0,1)[0]()});else for(d();v.AMapUI.length;)v.AMapUI.splice(0,1)[0]()},u.appendChild(r)}else s.AMapUI===i.loaded?e.version&&e.version!==t.AMapUI.version?o("不允许多个版本 AMapUI 混用"):n.length?window.AMapUI.loadUI(n,function(){for(var l=0,A=n.length;l<A;l++){var M=n[l].split("/").slice(-1)[0];window.AMapUI[M]=arguments[l]}d()}):d():e.version&&e.version!==t.AMapUI.version?o("不允许多个版本 AMapUI 混用"):v.AMapUI.push(function(l){l?o(l):n.length?window.AMapUI.loadUI(n,function(){for(var A=0,M=n.length;A<M;A++){var L=n[A].split("/").slice(-1)[0];window.AMapUI[L]=arguments[A]}d()}):d()})})}function b(e){return new Promise(function(d,o){if(s.Loca===i.failed)o("前次请求 Loca 失败");else if(s.Loca===i.notload){s.Loca=i.loading,t.Loca.version=e.version||t.Loca.version;var n=t.Loca.version,a=t.AMap.version.startsWith("2"),u=n.startsWith("2");if(a&&!u||!a&&u)o("JSAPI 与 Loca 版本不对应！！");else{a=t.key,u=document.body||document.head;var r=document.createElement("script");r.type="text/javascript",r.src="https://webapi.amap.com/loca?v="+n+"&key="+a,r.onerror=function(l){s.Loca=i.failed,o("请求 AMapUI 失败")},r.onload=function(){for(s.Loca=i.loaded,d();v.Loca.length;)v.Loca.splice(0,1)[0]()},u.appendChild(r)}}else s.Loca===i.loaded?e.version&&e.version!==t.Loca.version?o("不允许多个版本 Loca 混用"):d():e.version&&e.version!==t.Loca.version?o("不允许多个版本 Loca 混用"):v.Loca.push(function(l){l?o(l):o()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var i;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(i||(i={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},v={AMap:[],AMapUI:[],Loca:[]},I=[],P=function(e){typeof e=="function"&&(s.AMap===i.loaded?e(window.AMap):I.push(e))};return{load:function(e){return new Promise(function(d,o){if(s.AMap==i.failed)o("");else if(s.AMap==i.notload){var n=e.key,a=e.version,u=e.plugins;n?(window.AMap&&location.host!=="lbs.amap.com"&&o("禁止多种API加载方式混用"),t.key=n,t.AMap.version=a||t.AMap.version,t.AMap.plugins=u||t.AMap.plugins,s.AMap=i.loading,a=document.body||document.head,window.___onAPILoaded=function(l){if(delete window.___onAPILoaded,l)s.AMap=i.failed,o(l);else for(s.AMap=i.loaded,w(e).then(function(){d(window.AMap)}).catch(o);I.length;)I.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+n+"&plugin="+t.AMap.plugins.join(","),u.onerror=function(l){s.AMap=i.failed,o(l)},a.appendChild(u)):o("请填写key")}else if(s.AMap==i.loaded)if(e.key&&e.key!==t.key)o("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)o("不允许多个版本 JSAPI 混用");else{if(n=[],e.plugins)for(a=0;a<e.plugins.length;a+=1)t.AMap.plugins.indexOf(e.plugins[a])==-1&&n.push(e.plugins[a]);n.length?window.AMap.plugin(n,function(){w(e).then(function(){d(window.AMap)}).catch(o)}):w(e).then(function(){d(window.AMap)}).catch(o)}else if(e.key&&e.key!==t.key)o("多个不一致的 key");else if(e.version&&e.version!==t.AMap.version)o("不允许多个版本 JSAPI 混用");else{var r=[];if(e.plugins)for(a=0;a<e.plugins.length;a+=1)t.AMap.plugins.indexOf(e.plugins[a])==-1&&r.push(e.plugins[a]);P(function(){r.length?window.AMap.plugin(r,function(){w(e).then(function(){d(window.AMap)}).catch(o)}):w(e).then(function(){d(window.AMap)}).catch(o)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},v={AMap:[],AMapUI:[],Loca:[]}}}})})(D);var Z=D.exports;const q=R(Z);const U=f=>(W("data-v-945c5552"),f=f(),G(),f),z={class:"box"},Q=U(()=>p("h3",null,"Hello!",-1)),K=U(()=>p("span",null,"city:",-1)),X=U(()=>p("option",{value:"0"},"selet city",-1)),Y=["value"],$=U(()=>p("option",{value:"0"},"selet",-1)),ee=["value"],oe=["value"],ae=U(()=>p("div",{id:"container"},null,-1)),ne={__name:"APP",setup(f){let c=null,w=_([]),g=_([]),b=_([]),i=_(""),t=_("0"),s=_("0");const v=async()=>{const n=await(await fetch("/abc/aj/getcitycode")).json();w.value=n.result.hotcity},I=async o=>{let n=await fetch("/abc/aj/get_area/?citycode="+o);const{result:a}=await n.json();let u=Object.keys(a).map(r=>({area_id:r,area_name:a[r]}));g.value=u},P=async()=>{let o=w.value.find(l=>l.code==t.value).name+g.value.find(l=>l.area_id==s.value).area_name,r=(await(await fetch("https://restapi.amap.com/v3/geocode/geo?address="+String(o)+"&key=b5d17e738aa7c010bce787c441dd67c4")).json()).geocodes[0].location.split(",");console.log(r),c.setZoomAndCenter(12,r)},e=async()=>{let o=await fetch("/abc/at/shop?city_id="+t.value+"&area_id="+s.value);console.log(o);const n=await o.json();console.log(n),b=n.shop_data,console.log(b);var a='<div class="custom-content-marker">    <img src="../public/favicon.ico" />';n.shop_data.forEach(u=>{console.log(u.map_longitude);const r=new AMap.Marker({position:[u.map_longitude,u.map_latitude],content:a,title:u.shop_name});c.add(r)})},d=async()=>{const a=(await(await fetch("https://api.ipify.org?format=json")).json()).ip;console.log(a);let r=await(await fetch("https://restapi.amap.com/v3/ip?ip="+a+"&key=b5d17e738aa7c010bce787c441dd67c4")).json();console.log(r);let l=r.rectangle.split(";");console.log(l);let A=l[0].split(",").map(parseFloat),M=l[1].split(",").map(parseFloat),L=[(A[0]+M[0])/2,(A[1]+M[1])/2].map(String);console.log(L),c.setZoomAndCenter(12,L);let E=await(await fetch("https://restapi.amap.com/v3/weather/weatherInfo?city="+r.adcode+"&key=b5d17e738aa7c010bce787c441dd67c4")).json();i.value=E.lives[0].weather,console.log(i)};return S(t,o=>{I(o),s.value="0"}),S(s,o=>{o!=="0"&&(P(),e())}),V(()=>{v(),window._AMapSecurityConfig={securityJsCode:"	157eebb177a6db44bff167ca0ccc6482"},q.load({key:"4d96c8606504fe02df00df71523b9e90",version:"2.0",plugins:["AMap.Scale","AMap.ToolBar","AMap.MapType","AMap.OverView","AMap.controlBar"]}).then(o=>{c=new o.Map("container",{viewMode:"3D",zoom:11,center:[116.397428,39.90923]}),c.addControl(new o.Scale({isOpen:!0})),c.addControl(new o.ToolBar),c.addControl(new o.MapType),c.addControl(new o.OverView),c.addControl(new o.controlBar)}).catch(o=>{})}),F(()=>{c==null||c.destroy()}),(o,n)=>(h(),m(k,null,[p("div",z,[Q,p("div",null,[K,x(p("select",{"onUpdate:modelValue":n[0]||(n[0]=a=>B(t)?t.value=a:t=a)},[X,(h(!0),m(k,null,C(y(w),(a,u)=>(h(),m("option",{key:u,value:a.code},j(a.name),9,Y))),128))],512),[[O,y(t)]]),J("   "),x(p("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>B(s)?s.value=a:s=a)},[$,(h(!0),m(k,null,C(y(g),(a,u)=>(h(),m("option",{key:u,value:a.area_id},j(a.area_name),9,ee))),128))],512),[[O,y(s)]])]),p("div",null,[p("ul",null,[(h(!0),m(k,null,C(y(b),(a,u)=>(h(),m("li",{key:u,value:a.code},j(o.itme.shop_name),9,oe))),128))])])]),p("div",null,[p("button",{onClick:d},"回家"),p("p",null,"今天天气是："+j(y(i)),1)]),ae],64))}},te=T(ne,[["__scopeId","data-v-945c5552"]]);H(te).mount("#app");
